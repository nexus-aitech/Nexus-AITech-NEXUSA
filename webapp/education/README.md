# NEXUSA — VIP Layer (Portfolio / MemeCoin) — نسخهٔ ارتقایافتهٔ جهانی

این پوشه هستهٔ **تولید سیگنال، کنترل ریسک و گزارش‌دهی LLM** را برای لایهٔ VIP فراهم می‌کند. طراحی آن به‌گونه‌ای است که بتواند در سطح **Production-Grade جهانی** مورد استفاده تیم‌های ترید، ریسک و تحقیق قرار گیرد.

---

## اهداف کلیدی

* **ترکیب سیگنال‌ها:** تجمیع چندین منبع (فاندامنتال، آنچین، تکنیکال، روایتی/میم‌کوین).
* **Engine قوانین:** فیلتر، تأیید و ابطال سیگنال‌ها بر اساس منطق تعریف‌شده.
* **Risk Controller:** مدیریت اندازه پوزیشن، سقف‌های ریسک و محدودیت‌های پرتفوی.
* **Final Scorer:** تولید امتیاز نهایی (۰ تا ۱۰۰) برای هر دارایی.
* **Report Generator (LLM):** تبدیل خروجی به گزارش ساختاریافته و قابل انتشار در UI، تلگرام یا ایمیل.

---

## معماری سطح بالا

```
ingestion → features → signals (registry → rule_engine → risk_controller → final_scorer) → model_runner → report (llm_generator)
```

* **ingestion:** جمع‌آوری داده‌های بازار، آنچین، روایتی و تکنیکال.
* **features:** پردازش اولیه و استخراج متریک‌ها.
* **signals:** ماژول مرکزی شامل:

  * Registry: ثبت و فراخوانی سیگنال‌ها.
  * Rule Engine: اجرای قوانین فیلتر و تأیید.
  * Risk Controller: اعمال محدودیت‌های ریسک.
  * Final Scorer: تولید امتیاز نهایی.
* **model\_runner:** اجرای مدل‌ها و پردازش سیگنال‌ها.
* **report:** تولید گزارش نهایی توسط `llm_generator`.

---

## ورودی/خروجی استاندارد

* **ورودی سیگنال‌ها:**

  ```json
  {
    "symbol": "BTC",
    "features": { "nvt": 85.2, "sopr": 1.01, "exchange_netflow": -1200, ... },
    "context": { "market": "crypto", "sector": "memecoin" }
  }
  ```

* **خروجی سیگنال:**

  ```json
  {
    "symbol": "BTC",
    "score": 72,
    "side": "long",   // یا flat/short
    "rationale": "NVT بالا + خروج سرمایه از صرافی‌ها → احتمال انباشت",
    "risk": { "volatility": "high", "drawdown": 0.25 },
    "timestamp": "2025-09-06T12:00:00Z"
  }
  ```

* **گزارش (LLM Report):**

  * متن خوانا و خلاصه‌شده برای کاربر نهایی.
  * JSON ساختاریافته شامل بخش‌های: `exec_summary`, `key_points`, `risks`, `scenarios`, `action`, `confidence`.

---

## اصول و محدودیت‌ها

* هیچ‌کدام از این ماژول‌ها **سیگنال خرید/فروش قطعی** تولید نمی‌کنند.
* برای استفادهٔ عملی نیاز به:

  * اتصال به دادهٔ زنده (real-time feeds)
  * بک‌تست سخت‌گیرانه (robust backtesting)
  * مانیتورینگ و کنترل کیفیت (Monitoring/QA)
* شفافیت: هر خروجی باید شامل **منطق تولید سیگنال، منابع داده، و محدودیت‌ها** باشد.

---

## جمع‌بندی

لایهٔ VIP در NEXUSA نقطهٔ اتصال بین **سیگنال‌های خام** و **خروجی قابل‌اقدام** است. با معماری ماژولار، کنترل ریسک و گزارش‌دهی LLM، این سیستم آمادهٔ **لانچ جهانی** برای تیم‌های حرفه‌ای در حوزهٔ رمزارز است.
